/*
 * This file is part of Contao Sidebar Navigation.
 *
 * (c) Marko Cupic 2022 <m.cupic@gmx.ch>
 * @license GPL-3.0-or-later
 * For the full copyright and license information,
 * please view the LICENSE file that was distributed with this source code.
 * @link https://github.com/markocupic/contao-sidebar-navigation
 */ class ContaoSidebarNavigation{opt={submenuContainer:".submenu",followSubmenuContainerLink:!1,submenuTogglerHtml:'<button class="toggle-submenu" role="button"></button>'};constructor(e){this.opt={...this.opt,...e},this.initialize()}initialize(){this.opt.submenuTogglerHtml&&jQuery(this.opt.submenuTogglerHtml).insertBefore(".sidebar-navigation li"+this.opt.submenuContainer+" > a, .sidebar-navigation li"+this.opt.submenuContainer+" > strong"),jQuery(".sidebar-navigation li"+this.opt.submenuContainer+":not(.trail)").attr("aria-expanded","false"),jQuery(".sidebar-navigation li"+this.opt.submenuContainer+".trail, .sidebar-navigation li"+this.opt.submenuContainer+".active").addClass("expanded").attr("aria-expanded","true");let e=[".sidebar-navigation.mod_navigation .toggle-submenu"];!1===this.opt.followSubmenuContainerLink&&(e.push(".sidebar-navigation.mod_navigation li"+this.opt.submenuContainer+" > a"),e.push(".sidebar-navigation.mod_navigation li"+this.opt.submenuContainer+" > strong")),setTimeout(()=>{jQuery(e.join(", ")).click(e=>{let i=e.target;e.preventDefault(),e.stopPropagation(),jQuery(i).closest("li:not(.expanded)").find("li.expanded").removeClass("expanded").attr("aria-expanded","false").children("ul").slideUp(),jQuery(i).closest("li").siblings("li.expanded").removeClass("expanded").attr("aria-expanded","false").children("ul").slideUp(),jQuery(i).closest("li").hasClass("expanded")?jQuery(i).closest("li").removeClass("expanded").attr("aria-expanded","false").children("ul").slideUp():jQuery(i).closest("li").addClass("expanded").attr("aria-expanded","true").children("ul").slideDown()})},50)}}